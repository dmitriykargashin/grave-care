import{d as q,r as n,k as H,x,B as a,C as t,P as g,Z as v,_ as o,af as I,G as J,y as V,V as W,I as C,Y as _,au as k,J as u,D as s,aw as E,M as y,W as L,N as O,Q as S,A as N,a0 as A,aj as U,ak as $,z as j,a6 as Q,aA as Y,aB as Z,an as K,$ as X}from"./CqnZqnHT.js";const te=q({__name:"index",setup(ee){const b=J("showComingSoon"),P=J("showSnackbar"),p=n(""),c=n(null),m=n(null),i=n(!1),d=n(null),f=n(null),D=["Pending","Assigned","In Progress","Completed","Cancelled"],z=["Grave Cleanup","Flower Delivery","Headstone Care","Photo Report"],M=[{title:"Order #",key:"orderNumber",width:"120px"},{title:"Customer",key:"customerName"},{title:"Deceased",key:"deceasedName"},{title:"Service",key:"service"},{title:"Cemetery",key:"cemetery"},{title:"Status",key:"status",width:"120px"},{title:"Contractor",key:"contractor",width:"150px"},{title:"Date",key:"date",width:"100px"},{title:"Actions",key:"actions",width:"100px",sortable:!1}],R=n([{id:"1",orderNumber:"GC-001",customerName:"Alice Johnson",deceasedName:"John Smith",service:"Grave Cleanup",cemetery:"Green Lawn Memorial",status:"Pending",contractor:null,date:"Jan 15"},{id:"2",orderNumber:"GC-002",customerName:"Bob Williams",deceasedName:"Mary Johnson",service:"Flower Delivery",cemetery:"Oak Hill Cemetery",status:"Assigned",contractor:"Mike Thompson",date:"Jan 15"},{id:"3",orderNumber:"GC-003",customerName:"Carol Davis",deceasedName:"Robert Williams",service:"Headstone Care",cemetery:"Peaceful Rest",status:"In Progress",contractor:"Sarah Wilson",date:"Jan 14"},{id:"4",orderNumber:"GC-004",customerName:"Dan Brown",deceasedName:"Elizabeth Brown",service:"Photo Report",cemetery:"Memorial Gardens",status:"Completed",contractor:"David Garcia",date:"Jan 14"},{id:"5",orderNumber:"GC-005",customerName:"Eve Miller",deceasedName:"James Davis",service:"Grave Cleanup",cemetery:"Sunset Cemetery",status:"Pending",contractor:null,date:"Jan 14"},{id:"6",orderNumber:"GC-006",customerName:"Frank Garcia",deceasedName:"Patricia Wilson",service:"Flower Delivery",cemetery:"Green Lawn Memorial",status:"Assigned",contractor:"Emily Martinez",date:"Jan 13"},{id:"7",orderNumber:"GC-007",customerName:"Grace Lee",deceasedName:"Michael Moore",service:"Headstone Care",cemetery:"Oak Hill Cemetery",status:"Completed",contractor:"Mike Thompson",date:"Jan 13"},{id:"8",orderNumber:"GC-008",customerName:"Henry Chen",deceasedName:"Linda Taylor",service:"Grave Cleanup",cemetery:"Peaceful Rest",status:"Pending",contractor:null,date:"Jan 12"}]),w=[{id:"1",name:"Mike Thompson",activeJobs:3,online:!0},{id:"2",name:"Sarah Wilson",activeJobs:2,online:!0},{id:"3",name:"David Garcia",activeJobs:1,online:!1},{id:"4",name:"Emily Martinez",activeJobs:2,online:!0}],B=H(()=>R.value.filter(r=>!(c.value&&r.status!==c.value||m.value&&r.service!==m.value))),h=r=>{switch(r){case"Pending":return"warning";case"Assigned":return"info";case"In Progress":return"primary";case"Completed":return"success";case"Cancelled":return"error";default:return"grey"}},T=r=>{f.value=r,i.value=!0},F=()=>{if(f.value&&d.value){const r=w.find(e=>e.id===d.value);f.value.contractor=r?.name,f.value.status="Assigned",P?.(`Assigned to ${r?.name}`,"success")}i.value=!1,d.value=null};return(r,e)=>(V(),x("div",null,[a(g,{class:"mb-4 pa-4",elevation:"2"},{default:t(()=>[a(W,{align:"center"},{default:t(()=>[a(C,{cols:"12",md:"4"},{default:t(()=>[a(_,{modelValue:o(p),"onUpdate:modelValue":e[0]||(e[0]=l=>v(p)?p.value=l:null),"prepend-inner-icon":"mdi-magnify",label:"Search requests...","hide-details":"",density:"compact"},null,8,["modelValue"])]),_:1}),a(C,{cols:"6",md:"2"},{default:t(()=>[a(k,{modelValue:o(c),"onUpdate:modelValue":e[1]||(e[1]=l=>v(c)?c.value=l:null),items:D,label:"Status","hide-details":"",density:"compact",clearable:""},null,8,["modelValue"])]),_:1}),a(C,{cols:"6",md:"2"},{default:t(()=>[a(k,{modelValue:o(m),"onUpdate:modelValue":e[2]||(e[2]=l=>v(m)?m.value=l:null),items:z,label:"Service","hide-details":"",density:"compact",clearable:""},null,8,["modelValue"])]),_:1}),a(C,{cols:"12",md:"4",class:"text-right"},{default:t(()=>[a(u,{color:"primary","prepend-icon":"mdi-plus",onClick:o(b)},{default:t(()=>[...e[6]||(e[6]=[s(" New Request ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),a(g,{elevation:"2"},{default:t(()=>[a(E,{headers:M,items:o(B),search:o(p),hover:""},{"item.status":t(({item:l})=>[a(A,{color:h(l.status),size:"small"},{default:t(()=>[s(N(l.status),1)]),_:2},1032,["color"])]),"item.contractor":t(({item:l})=>[l.contractor?(V(),x(O,{key:0},[a(S,{size:"24",color:"grey-lighten-2",class:"mr-2"},{default:t(()=>[a(y,{size:"16"},{default:t(()=>[...e[7]||(e[7]=[s("mdi-account",-1)])]),_:1})]),_:1}),s(" "+N(l.contractor),1)],64)):(V(),L(u,{key:1,size:"small",variant:"tonal",color:"primary",onClick:G=>T(l)},{default:t(()=>[...e[8]||(e[8]=[s(" Assign ",-1)])]),_:1},8,["onClick"]))]),"item.actions":t(({item:l})=>[a(u,{icon:"",variant:"text",size:"small",to:`/admin/requests/${l.id}`},{default:t(()=>[a(y,null,{default:t(()=>[...e[9]||(e[9]=[s("mdi-eye",-1)])]),_:1})]),_:1},8,["to"]),a(u,{icon:"",variant:"text",size:"small",onClick:o(b)},{default:t(()=>[a(y,null,{default:t(()=>[...e[10]||(e[10]=[s("mdi-pencil",-1)])]),_:1})]),_:1},8,["onClick"])]),_:1},8,["items","search"])]),_:1}),a(I,{modelValue:o(i),"onUpdate:modelValue":e[5]||(e[5]=l=>v(i)?i.value=l:null),"max-width":"400"},{default:t(()=>[a(g,null,{default:t(()=>[a(U,null,{default:t(()=>[...e[11]||(e[11]=[s("Assign Contractor",-1)])]),_:1}),a($,null,{default:t(()=>[e[13]||(e[13]=j("p",{class:"mb-4"},"Select a contractor for this job:",-1)),a(k,{modelValue:o(d),"onUpdate:modelValue":e[3]||(e[3]=l=>v(d)?d.value=l:null),items:w,"item-title":"name","item-value":"id",label:"Contractor"},{item:t(({item:l,props:G})=>[a(Q,Y(Z(G)),{prepend:t(()=>[a(S,{size:"32",color:"grey-lighten-2"},{default:t(()=>[a(y,null,{default:t(()=>[...e[12]||(e[12]=[s("mdi-account",-1)])]),_:1})]),_:1})]),append:t(()=>[a(A,{size:"x-small",color:l.raw.online?"success":"grey"},{default:t(()=>[s(N(l.raw.activeJobs)+" jobs ",1)]),_:2},1032,["color"])]),_:2},1040)]),_:1},8,["modelValue"])]),_:1}),a(K,null,{default:t(()=>[a(X),a(u,{variant:"text",onClick:e[4]||(e[4]=l=>i.value=!1)},{default:t(()=>[...e[14]||(e[14]=[s("Cancel",-1)])]),_:1}),a(u,{color:"primary",onClick:F},{default:t(()=>[...e[15]||(e[15]=[s("Assign",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}});export{te as default};
