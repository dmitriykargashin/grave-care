import{_ as $}from"./0HdooiPx.js";import{d as z,r as f,k as E,I as F,x as I,B as e,C as t,V as h,J as s,$ as k,y as x,K as R,_,D as u,M as m,q as J,z as d,N as M,O as P,A as c,a4 as U}from"./DSoo6jVJ.js";import{u as j,a as K,V as b,c as O}from"./BxkK-uK3.js";import{V as G}from"./BLiBMJ1o.js";import"./D9WYUSSA.js";const H={class:"font-weight-medium"},L={class:"text-center py-8"},Q={class:"text-body-2 text-medium-emphasis mb-4"},oe=z({__name:"index",async setup(W){let r,g;const l=f(""),N=E(()=>{const n={};return l.value&&(n.q=l.value),n}),{data:T,pending:w,refresh:v}=([r,g]=F(()=>j("/api/customers",{query:N},"$J3I4dd1_tm")),r=await r,g(),r),i=f(!1),p=f(null),D=[{title:"Full Name",key:"fullName",sortable:!0},{title:"Phone",key:"phone",sortable:!0},{title:"Email",key:"email",sortable:!0},{title:"",key:"actions",sortable:!1,width:50}];let V;function B(){clearTimeout(V),V=setTimeout(()=>v(),300)}function y(){p.value=null,i.value=!0}function q(n){p.value=n,i.value=!0}function A(){v()}return(n,o)=>{const S=$;return x(),I("div",null,[e(h,{class:"mb-4"},{default:t(()=>[e(R,null,{default:t(()=>[e(K,{align:"center"},{default:t(()=>[e(b,{cols:"12",sm:"6",md:"4"},{default:t(()=>[e(O,{modelValue:s(l),"onUpdate:modelValue":[o[0]||(o[0]=a=>k(l)?l.value=a:null),B],"prepend-inner-icon":"mdi-magnify",label:"Search customers...","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1}),e(b,{cols:"12",sm:"6",md:"8",class:"text-right"},{default:t(()=>[e(_,{color:"primary",onClick:y},{default:t(()=>[e(m,{icon:"mdi-plus",start:""}),o[3]||(o[3]=u(" New Customer ",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(h,null,{default:t(()=>[e(G,{headers:D,items:s(T)||[],loading:s(w),"items-per-page":15,hover:"","onClick:row":o[1]||(o[1]=(a,{item:C})=>("navigateTo"in n?n.navigateTo:s(J))(`/customers/${C.id}`))},{"item.fullName":t(({item:a})=>[d("span",H,c(a.fullName),1)]),"item.phone":t(({item:a})=>[u(c(a.phone||"-"),1)]),"item.email":t(({item:a})=>[u(c(a.email||"-"),1)]),"item.actions":t(({item:a})=>[e(_,{icon:"",variant:"text",size:"small",onClick:U(C=>q(a),["stop"])},{default:t(()=>[e(m,{icon:"mdi-pencil"})]),_:1},8,["onClick"])]),"no-data":t(()=>[d("div",L,[e(m,{icon:"mdi-account-group",size:"64",color:"grey-lighten-1"}),o[5]||(o[5]=d("div",{class:"text-h6 mt-4"},"No customers found",-1)),d("div",Q,c(s(l)?"Try adjusting your search":"Add your first customer to get started"),1),s(l)?P("",!0):(x(),M(_,{key:0,color:"primary",onClick:y},{default:t(()=>[e(m,{icon:"mdi-plus",start:""}),o[4]||(o[4]=u(" Add Customer ",-1))]),_:1}))])]),_:1},8,["items","loading"])]),_:1}),e(S,{modelValue:s(i),"onUpdate:modelValue":o[2]||(o[2]=a=>k(i)?i.value=a:null),customer:s(p),onSaved:A},null,8,["modelValue","customer"])])}}});export{oe as default};
