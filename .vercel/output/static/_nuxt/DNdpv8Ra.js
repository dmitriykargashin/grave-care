import{d as U,aq as X,r as m,k as q,x as C,B as t,C as o,J as p,V,Z as L,_ as l,af as W,G as E,y as c,D as s,M as a,I as b,P as u,aj as P,Q as K,A as f,$ as Q,a0 as Y,a4 as k,ak as _,z as n,a5 as Z,a6 as R,a7 as T,a9 as z,K as I,N as M,O as A,W as S,ad as ee,X as te,ar as oe}from"./CqnZqnHT.js";const se={class:"text-body-2 text-grey-darken-1"},le={class:"d-flex justify-space-between align-center"},ae={class:"text-h5 font-weight-bold text-success"},re={class:"d-flex align-center justify-center h-100"},ne={class:"text-h4 font-weight-bold"},ue=U({__name:"[id]",setup(de){const J=X(),$=E("showSnackbar"),d=m({id:J.params.id,deceasedName:"Robert Williams",service:"Headstone Care",cemetery:"Peaceful Rest Cemetery",address:"789 Peace Ln, Austin, TX 78701",plotReference:"Section C, Row 8, Plot 12",instructions:"The headstone is black granite. Please use appropriate cleaning solution. There may be some moss growing on the north side that needs attention.",payout:"$55"}),v=m(["https://images.unsplash.com/photo-1509027572446-af8401acfdc3?w=200&h=200&fit=crop"]),y=m([]),x=m(""),h=m(!1),w=m(!1),B=q(()=>v.value.length>0&&y.value.length>0),D=i=>{switch(i){case"Grave Cleanup":return"green";case"Flower Delivery":return"pink";case"Headstone Care":return"grey";case"Photo Report":return"blue";default:return"primary"}},G=i=>{switch(i){case"Grave Cleanup":return"mdi-broom";case"Flower Delivery":return"mdi-flower";case"Headstone Care":return"mdi-grave-stone";case"Photo Report":return"mdi-camera";default:return"mdi-clipboard"}},N=i=>{const e=["https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=200&h=200&fit=crop","https://images.unsplash.com/photo-1519125323398-675f0ddb6308?w=200&h=200&fit=crop","https://images.unsplash.com/photo-1509027572446-af8401acfdc3?w=200&h=200&fit=crop"],r=e[Math.floor(Math.random()*e.length)];i==="before"?v.value.push(r):y.value.push(r),$?.("Photo added (demo)","info")},j=(i,e)=>{i==="before"?v.value.splice(e,1):y.value.splice(e,1)},F=()=>{window.open(`https://maps.google.com/?q=${encodeURIComponent(d.value.address)}`,"_blank")},H=async()=>{h.value=!0,await new Promise(i=>setTimeout(i,2e3)),h.value=!1,w.value=!0};return(i,e)=>(c(),C("div",null,[t(p,{variant:"text",to:"/contractor",class:"mb-4"},{default:o(()=>[t(a,{start:""},{default:o(()=>[...e[4]||(e[4]=[s("mdi-arrow-left",-1)])]),_:1}),e[5]||(e[5]=s(" Back to My Jobs ",-1))]),_:1}),t(V,null,{default:o(()=>[t(b,{cols:"12",md:"6"},{default:o(()=>[t(u,{elevation:"2",class:"mb-4"},{default:o(()=>[t(P,{class:"d-flex align-center"},{default:o(()=>[t(K,{color:D(l(d).service),size:"40",class:"mr-3"},{default:o(()=>[t(a,{color:"white"},{default:o(()=>[s(f(G(l(d).service)),1)]),_:1})]),_:1},8,["color"]),s(" "+f(l(d).service)+" ",1),t(Q),t(Y,{color:"info"},{default:o(()=>[...e[6]||(e[6]=[s("In Progress",-1)])]),_:1})]),_:1}),t(k),t(_,null,{default:o(()=>[t(Z,{density:"compact",class:"bg-transparent"},{default:o(()=>[t(R,null,{prepend:o(()=>[t(a,null,{default:o(()=>[...e[7]||(e[7]=[s("mdi-account-heart",-1)])]),_:1})]),default:o(()=>[t(T,null,{default:o(()=>[s(f(l(d).deceasedName),1)]),_:1}),t(z,null,{default:o(()=>[...e[8]||(e[8]=[s("Loved One",-1)])]),_:1})]),_:1}),t(R,null,{prepend:o(()=>[t(a,null,{default:o(()=>[...e[9]||(e[9]=[s("mdi-map-marker",-1)])]),_:1})]),default:o(()=>[t(T,null,{default:o(()=>[s(f(l(d).cemetery),1)]),_:1}),t(z,null,{default:o(()=>[s(f(l(d).address),1)]),_:1})]),_:1}),t(R,null,{prepend:o(()=>[t(a,null,{default:o(()=>[...e[10]||(e[10]=[s("mdi-grave-stone",-1)])]),_:1})]),default:o(()=>[t(T,null,{default:o(()=>[s(f(l(d).plotReference),1)]),_:1}),t(z,null,{default:o(()=>[...e[11]||(e[11]=[s("Plot Reference",-1)])]),_:1})]),_:1})]),_:1}),t(k,{class:"my-4"}),e[13]||(e[13]=n("h4",{class:"font-weight-bold mb-2"},"Special Instructions",-1)),n("p",se,f(l(d).instructions||"No special instructions provided."),1),t(k,{class:"my-4"}),n("div",le,[e[12]||(e[12]=n("span",{class:"text-body-2 text-grey"},"Your Payout",-1)),n("span",ae,f(l(d).payout),1)])]),_:1})]),_:1}),t(u,{elevation:"2"},{default:o(()=>[t(P,null,{default:o(()=>[t(a,{class:"mr-2"},{default:o(()=>[...e[14]||(e[14]=[s("mdi-map",-1)])]),_:1}),e[15]||(e[15]=s(" Location ",-1))]),_:1}),t(I,{src:"https://maps.googleapis.com/maps/api/staticmap?center=Austin,TX&zoom=14&size=600x300&maptype=roadmap&key=demo",height:"200",class:"bg-grey-lighten-3"},{default:o(()=>[n("div",re,[t(p,{color:"primary","prepend-icon":"mdi-navigation",onClick:F},{default:o(()=>[...e[16]||(e[16]=[s(" Open in Maps ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1}),t(b,{cols:"12",md:"6"},{default:o(()=>[t(u,{elevation:"2",class:"mb-4"},{default:o(()=>[t(P,null,{default:o(()=>[t(a,{class:"mr-2"},{default:o(()=>[...e[17]||(e[17]=[s("mdi-camera",-1)])]),_:1}),e[18]||(e[18]=s(" Job Photos ",-1))]),_:1}),t(k),t(_,null,{default:o(()=>[e[23]||(e[23]=n("h4",{class:"font-weight-bold mb-3"},"Before Photos",-1)),t(V,{class:"mb-4"},{default:o(()=>[(c(!0),C(M,null,A(l(v),(r,g)=>(c(),S(b,{key:"before-"+g,cols:"4"},{default:o(()=>[t(u,{variant:"outlined",class:"pa-1"},{default:o(()=>[t(I,{src:r,height:"80",cover:"",class:"rounded"},null,8,["src"]),t(p,{icon:"",size:"x-small",color:"error",class:"position-absolute",style:{top:"4px",right:"4px"},onClick:O=>j("before",g)},{default:o(()=>[t(a,{size:"small"},{default:o(()=>[...e[19]||(e[19]=[s("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),t(b,{cols:"4"},{default:o(()=>[t(u,{variant:"outlined",class:"d-flex align-center justify-center",height:"80",style:{cursor:"pointer","border-style":"dashed"},onClick:e[0]||(e[0]=r=>N("before"))},{default:o(()=>[t(a,{color:"grey"},{default:o(()=>[...e[20]||(e[20]=[s("mdi-plus",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),e[24]||(e[24]=n("h4",{class:"font-weight-bold mb-3"},"After Photos",-1)),t(V,{class:"mb-4"},{default:o(()=>[(c(!0),C(M,null,A(l(y),(r,g)=>(c(),S(b,{key:"after-"+g,cols:"4"},{default:o(()=>[t(u,{variant:"outlined",class:"pa-1"},{default:o(()=>[t(I,{src:r,height:"80",cover:"",class:"rounded"},null,8,["src"]),t(p,{icon:"",size:"x-small",color:"error",class:"position-absolute",style:{top:"4px",right:"4px"},onClick:O=>j("after",g)},{default:o(()=>[t(a,{size:"small"},{default:o(()=>[...e[21]||(e[21]=[s("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),t(b,{cols:"4"},{default:o(()=>[t(u,{variant:"outlined",class:"d-flex align-center justify-center",height:"80",style:{cursor:"pointer","border-style":"dashed"},onClick:e[1]||(e[1]=r=>N("after"))},{default:o(()=>[t(a,{color:"grey"},{default:o(()=>[...e[22]||(e[22]=[s("mdi-plus",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),t(ee,{modelValue:l(x),"onUpdate:modelValue":e[2]||(e[2]=r=>L(x)?x.value=r:null),label:"Completion Notes",placeholder:"Any notes about the work completed...",rows:"3"},null,8,["modelValue"])]),_:1})]),_:1}),t(u,{elevation:"2"},{default:o(()=>[t(_,null,{default:o(()=>[l(B)?te("",!0):(c(),S(oe,{key:0,type:"warning",variant:"tonal",class:"mb-4"},{default:o(()=>[...e[25]||(e[25]=[s(" Please upload at least one before and one after photo to complete this job. ",-1)])]),_:1})),t(p,{block:"",color:"success",size:"large",disabled:!l(B),loading:l(h),onClick:H},{default:o(()=>[t(a,{start:""},{default:o(()=>[...e[26]||(e[26]=[s("mdi-check-circle",-1)])]),_:1}),e[27]||(e[27]=s(" Mark Job Complete ",-1))]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1}),t(W,{modelValue:l(w),"onUpdate:modelValue":e[3]||(e[3]=r=>L(w)?w.value=r:null),"max-width":"400",persistent:""},{default:o(()=>[t(u,{class:"pa-6 text-center"},{default:o(()=>[t(a,{icon:"mdi-check-circle",color:"success",size:"80",class:"mb-4"}),e[30]||(e[30]=n("h2",{class:"text-h5 font-weight-bold mb-2"},"Job Completed!",-1)),e[31]||(e[31]=n("p",{class:"text-body-1 text-grey-darken-1 mb-4"}," Great work! The customer will be notified and you'll receive your payout soon. ",-1)),t(u,{variant:"tonal",color:"success",class:"pa-4 mb-6"},{default:o(()=>[e[28]||(e[28]=n("div",{class:"text-overline"},"Payout",-1)),n("div",ne,f(l(d).payout),1)]),_:1}),t(p,{color:"primary",block:"",to:"/contractor"},{default:o(()=>[...e[29]||(e[29]=[s(" Back to My Jobs ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}});export{ue as default};
