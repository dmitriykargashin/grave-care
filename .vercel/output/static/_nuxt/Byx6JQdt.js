import{_ as z}from"./iZecZUG0.js";import{d as E,r as f,k as F,ao as I,x as P,B as e,C as t,P as k,_ as s,Z as h,y as x,ak as R,V as $,I as b,Y as J,J as _,D as u,M as m,aw as M,q as U,z as d,W as j,X as W,A as c,am as X}from"./CqnZqnHT.js";import{u as Y}from"./CPSzfpNf.js";const Z={class:"font-weight-medium"},G={class:"text-center py-8"},H={class:"text-body-2 text-medium-emphasis mb-4"},ee=E({__name:"index",async setup(K){let r,g;const l=f(""),T=F(()=>{const n={};return l.value&&(n.q=l.value),n}),{data:w,pending:N,refresh:v}=([r,g]=I(()=>Y("/api/customers",{query:T},"$J3I4dd1_tm")),r=await r,g(),r),i=f(!1),p=f(null),D=[{title:"Full Name",key:"fullName",sortable:!0},{title:"Phone",key:"phone",sortable:!0},{title:"Email",key:"email",sortable:!0},{title:"",key:"actions",sortable:!1,width:50}];let y;function B(){clearTimeout(y),y=setTimeout(()=>v(),300)}function C(){p.value=null,i.value=!0}function q(n){p.value=n,i.value=!0}function A(){v()}return(n,a)=>{const S=z;return x(),P("div",null,[e(k,{class:"mb-4"},{default:t(()=>[e(R,null,{default:t(()=>[e($,{align:"center"},{default:t(()=>[e(b,{cols:"12",sm:"6",md:"4"},{default:t(()=>[e(J,{modelValue:s(l),"onUpdate:modelValue":[a[0]||(a[0]=o=>h(l)?l.value=o:null),B],"prepend-inner-icon":"mdi-magnify",label:"Search customers...","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1}),e(b,{cols:"12",sm:"6",md:"8",class:"text-right"},{default:t(()=>[e(_,{color:"primary",onClick:C},{default:t(()=>[e(m,{icon:"mdi-plus",start:""}),a[3]||(a[3]=u(" New Customer ",-1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(k,null,{default:t(()=>[e(M,{headers:D,items:s(w)||[],loading:s(N),"items-per-page":15,hover:"","onClick:row":a[1]||(a[1]=(o,{item:V})=>("navigateTo"in n?n.navigateTo:s(U))(`/customers/${V.id}`))},{"item.fullName":t(({item:o})=>[d("span",Z,c(o.fullName),1)]),"item.phone":t(({item:o})=>[u(c(o.phone||"-"),1)]),"item.email":t(({item:o})=>[u(c(o.email||"-"),1)]),"item.actions":t(({item:o})=>[e(_,{icon:"",variant:"text",size:"small",onClick:X(V=>q(o),["stop"])},{default:t(()=>[e(m,{icon:"mdi-pencil"})]),_:1},8,["onClick"])]),"no-data":t(()=>[d("div",G,[e(m,{icon:"mdi-account-group",size:"64",color:"grey-lighten-1"}),a[5]||(a[5]=d("div",{class:"text-h6 mt-4"},"No customers found",-1)),d("div",H,c(s(l)?"Try adjusting your search":"Add your first customer to get started"),1),s(l)?W("",!0):(x(),j(_,{key:0,color:"primary",onClick:C},{default:t(()=>[e(m,{icon:"mdi-plus",start:""}),a[4]||(a[4]=u(" Add Customer ",-1))]),_:1}))])]),_:1},8,["items","loading"])]),_:1}),e(S,{modelValue:s(i),"onUpdate:modelValue":a[2]||(a[2]=o=>h(i)?i.value=o:null),customer:s(p),onSaved:A},null,8,["modelValue","customer"])])}}});export{ee as default};
