import{_ as W,T as w,a as Y}from"./TP-IniU1.js";import{u as j,V as m,a as x}from"./BxkK-uK3.js";import{d as G,I as J,r as M,G as X,x as T,y as i,B as e,C as t,V as k,J as a,K as p,z as d,L as b,M as n,A as r,N as f,O as z,P as C,D as o,Q as N,R as A,S as D,T as L,U as R,W as I,X as $,Y as h,Z as B,_,$ as Z}from"./DSoo6jVJ.js";import{V as F}from"./BNw2KUzE.js";import"./CDhTuRGa.js";import"./D9WYUSSA.js";const q={class:"text-h4 font-weight-bold"},H={class:"text-h4 font-weight-bold"},ee={class:"text-h4 font-weight-bold"},te={class:"text-error ml-2"},re=G({__name:"index",async setup(le){let y,S;const{data:c,pending:v,refresh:E}=([y,S]=J(()=>j("/api/dashboard","$QD8d9NkvSp")),y=await y,S(),y),g=M(!1),V=X("showComingSoon");function O(u){return w.find(l=>l.value===u)?.color||"grey"}function P(u){return w.find(l=>l.value===u)?.title||u}function U(u){return Y.find(l=>l.value===u)?.color||"grey"}function K(u){return u?new Date(u).toLocaleDateString():"-"}return(u,l)=>{const Q=W;return i(),T("div",null,[e(x,{class:"mb-4"},{default:t(()=>[e(m,{cols:"12",sm:"6",md:"4"},{default:t(()=>[e(k,{class:"h-100",loading:a(v)},{default:t(()=>[e(p,{class:"d-flex align-center"},{default:t(()=>[e(b,{color:"primary",size:"56",class:"mr-4"},{default:t(()=>[e(n,{icon:"mdi-clipboard-text-clock",size:"28"})]),_:1}),d("div",null,[d("div",q,r(a(c)?.openTasksCount??"-"),1),l[5]||(l[5]=d("div",{class:"text-body-2 text-medium-emphasis"},"Open Tasks",-1))])]),_:1})]),_:1},8,["loading"])]),_:1}),e(m,{cols:"12",sm:"6",md:"4"},{default:t(()=>[e(k,{class:"h-100",loading:a(v)},{default:t(()=>[e(p,{class:"d-flex align-center"},{default:t(()=>[e(b,{color:"info",size:"56",class:"mr-4"},{default:t(()=>[e(n,{icon:"mdi-calendar-week",size:"28"})]),_:1}),d("div",null,[d("div",H,r(a(c)?.scheduledThisWeekCount??"-"),1),l[6]||(l[6]=d("div",{class:"text-body-2 text-medium-emphasis"},"Scheduled This Week",-1))])]),_:1})]),_:1},8,["loading"])]),_:1}),e(m,{cols:"12",sm:"6",md:"4"},{default:t(()=>[e(k,{class:"h-100",loading:a(v)},{default:t(()=>[e(p,{class:"d-flex align-center"},{default:t(()=>[e(b,{color:"success",size:"56",class:"mr-4"},{default:t(()=>[e(n,{icon:"mdi-check-circle",size:"28"})]),_:1}),d("div",null,[d("div",ee,r(a(c)?.completedLast7DaysCount??"-"),1),l[7]||(l[7]=d("div",{class:"text-body-2 text-medium-emphasis"},"Completed (7 days)",-1))])]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}),e(x,null,{default:t(()=>[e(m,{cols:"12",md:"6"},{default:t(()=>[e(k,null,{default:t(()=>[e(C,{class:"d-flex align-center"},{default:t(()=>[e(n,{icon:"mdi-alert-circle",color:"error",class:"mr-2"}),l[8]||(l[8]=o(" Overdue Tasks ",-1))]),_:1}),a(v)?(i(),f(p,{key:0},{default:t(()=>[e(F,{type:"list-item-two-line@3"})]),_:1})):a(c)?.overdueTasks?.length?(i(),f(N,{key:1},{default:t(()=>[(i(!0),T(A,null,D(a(c).overdueTasks,s=>(i(),f(L,{key:s.id,to:`/tasks/${s.id}`,class:"border-b"},{prepend:t(()=>[e($,{color:U(s.priority),size:"small",class:"mr-3"},{default:t(()=>[o(r(s.priority),1)]),_:2},1032,["color"])]),append:t(()=>[e(n,{icon:"mdi-chevron-right",size:"small"})]),default:t(()=>[e(R,null,{default:t(()=>[o(r(s.title),1)]),_:2},1024),e(I,null,{default:t(()=>[e(n,{icon:"mdi-map-marker",size:"12",class:"mr-1"}),o(" "+r(s.cemeteryName)+" · "+r(s.plotRef)+" ",1),d("span",te,[e(n,{icon:"mdi-calendar",size:"12",class:"mr-1"}),o(" "+r(K(s.scheduledFor)),1)])]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:1})):(i(),f(p,{key:2,class:"text-center text-medium-emphasis py-8"},{default:t(()=>[e(n,{icon:"mdi-check-circle-outline",size:"48",color:"success",class:"mb-2"}),l[9]||(l[9]=d("div",null,"No overdue tasks!",-1))]),_:1})),a(c)?.overdueTasks?.length?(i(),f(h,{key:3},{default:t(()=>[e(B),e(_,{variant:"text",to:"/tasks?dateFilter=overdue"},{default:t(()=>[l[10]||(l[10]=o(" View All ",-1)),e(n,{icon:"mdi-arrow-right",end:""})]),_:1})]),_:1})):z("",!0)]),_:1})]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[e(k,null,{default:t(()=>[e(C,{class:"d-flex align-center"},{default:t(()=>[e(n,{icon:"mdi-history",color:"info",class:"mr-2"}),l[11]||(l[11]=o(" Recent Activity ",-1))]),_:1}),a(v)?(i(),f(p,{key:0},{default:t(()=>[e(F,{type:"list-item-two-line@3"})]),_:1})):a(c)?.recentTasks?.length?(i(),f(N,{key:1},{default:t(()=>[(i(!0),T(A,null,D(a(c).recentTasks,s=>(i(),f(L,{key:s.id,to:`/tasks/${s.id}`,class:"border-b"},{prepend:t(()=>[e($,{color:O(s.status),size:"small",class:"mr-3"},{default:t(()=>[o(r(P(s.status)),1)]),_:2},1032,["color"])]),append:t(()=>[e(n,{icon:"mdi-chevron-right",size:"small"})]),default:t(()=>[e(R,null,{default:t(()=>[o(r(s.title),1)]),_:2},1024),e(I,null,{default:t(()=>[o(r(s.deceasedName||"Unknown")+" · "+r(s.cemeteryName),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:1})):(i(),f(p,{key:2,class:"text-center text-medium-emphasis py-8"},{default:t(()=>[e(n,{icon:"mdi-clipboard-text-outline",size:"48",class:"mb-2"}),l[13]||(l[13]=d("div",null,"No tasks yet",-1)),e(_,{color:"primary",class:"mt-4",to:"/tasks"},{default:t(()=>[...l[12]||(l[12]=[o(" Create Your First Task ",-1)])]),_:1})]),_:1})),a(c)?.recentTasks?.length?(i(),f(h,{key:3},{default:t(()=>[e(B),e(_,{variant:"text",to:"/tasks"},{default:t(()=>[l[14]||(l[14]=o(" View All Tasks ",-1)),e(n,{icon:"mdi-arrow-right",end:""})]),_:1})]),_:1})):z("",!0)]),_:1})]),_:1})]),_:1}),e(x,{class:"mt-4"},{default:t(()=>[e(m,{cols:"12"},{default:t(()=>[e(k,null,{default:t(()=>[e(C,null,{default:t(()=>[...l[15]||(l[15]=[o("Quick Actions",-1)])]),_:1}),e(p,null,{default:t(()=>[e(x,null,{default:t(()=>[e(m,{cols:"6",sm:"3"},{default:t(()=>[e(_,{block:"",variant:"tonal",color:"primary","prepend-icon":"mdi-plus",onClick:l[0]||(l[0]=s=>g.value=!0)},{default:t(()=>[...l[16]||(l[16]=[o(" New Task ",-1)])]),_:1})]),_:1}),e(m,{cols:"6",sm:"3"},{default:t(()=>[e(_,{block:"",variant:"tonal","prepend-icon":"mdi-file-pdf-box",onClick:l[1]||(l[1]=s=>a(V)?.())},{default:t(()=>[...l[17]||(l[17]=[o(" Export PDF ",-1)])]),_:1})]),_:1}),e(m,{cols:"6",sm:"3"},{default:t(()=>[e(_,{block:"",variant:"tonal","prepend-icon":"mdi-email-send",onClick:l[2]||(l[2]=s=>a(V)?.())},{default:t(()=>[...l[18]||(l[18]=[o(" Send Report ",-1)])]),_:1})]),_:1}),e(m,{cols:"6",sm:"3"},{default:t(()=>[e(_,{block:"",variant:"tonal","prepend-icon":"mdi-calendar-sync",onClick:l[3]||(l[3]=s=>a(V)?.())},{default:t(()=>[...l[19]||(l[19]=[o(" Recurring Tasks ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(Q,{modelValue:a(g),"onUpdate:modelValue":l[4]||(l[4]=s=>Z(g)?g.value=s:null),onSaved:a(E)},null,8,["modelValue","onSaved"])])}}});export{re as default};
